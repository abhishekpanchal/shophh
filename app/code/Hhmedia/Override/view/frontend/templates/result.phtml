<?php 
/*
$query = $this->getRequest()->getParam('q');
echo "Showing ".$block->getResultCount()." Results for '".$query."'"; 
*/
?>
<?php if ($block->getResultCount()): ?>
<?php echo $block->getChildHtml('tagged_product_list_rss_link'); ?>
<div class="search results">
    <?php if ($messages = $block->getNoteMessages()):?>
    <div class="message notice">
        <div>
            <?php foreach ($messages as $message):?>
                <?php /* @escapeNotVerified */ echo $message?><br />
            <?php endforeach;?>
        </div>
    </div>
    <?php endif; ?>
    <?php echo $block->getProductListHtml() ?>
</div>
<?php else: ?>

<h4 class="noresults-products-text">
    <?php echo __("View our product suggestions to find something else you may be interested in :"); ?>
</h4>

<?php
    $objectManager = \Magento\Framework\App\ObjectManager::getInstance();
    $productCollection = $objectManager->create('Magento\Catalog\Model\ResourceModel\Product\Collection');
    $productCollection->addAttributeToSelect('*');
    $productCollection->addFieldToFilter('status',1);
    $productCollection->addFieldToFilter('type_id','simple');
    $productCollection->addFieldToFilter('visibility',4);
    $productCollection->setPageSize(12);
    $productCollection->getSelect()->orderRand();
    $productCollection->load();

    $customHelper = $this->helper('Hhmedia\Productpage\Helper\Newproduct'); 
    
    foreach($productCollection as $_product):
        $helper = $this->helper('Hhmedia\Override\Helper\Override');
        $product = $helper->getLoadProduct($_product->getEntityId());
        $objPrice = \Magento\Framework\App\ObjectManager::getInstance(); 
        $priceHelper = $objPrice->create('Magento\Framework\Pricing\Helper\Data');
        $image = $product->getData('small_image');
?>

    <div class="noresults-products col-md-3">
        <div class="image relative">
            <a href="<?php echo $product->getProductUrl() ?>">
                <img src="<?php echo $customHelper->resize($image,240,240); ?>" />
            </a>
            <?php $quickViewUrl = $this->getUrl('').'weltpixel_quickview/catalog_product/view/id/'.$product->getId(); ?>
            <a href="javascript: void(0);" data-quickview-url="<?php echo $quickViewUrl ?>" class="weltpixel-quickview quickview-bar2" title="Quick View">Quick Look</a>
        </div>
        <h4>
            <a href="<?php echo $product->getProductUrl() ?>"><?php echo $product->getName(); ?></a>
        </h4>
        <?php if($customHelper->getStockQty($product)): ?>
            <span class="callout one-left"><?php echo __('Only 1 left'); ?></span>
        <?php elseif($customHelper->isEditorsPick($product)): ?>
            <span class="callout editors-pick"><?php echo __('Editorâ€™s Pick'); ?></span>
        <?php elseif($customHelper->isExclusive($product)): ?>
            <span class="callout exclusive"><?php echo __('H&H exclusive'); ?></span> 
        <?php elseif($customHelper->isOnSale($product)): ?>
            <span class="callout one-sale"><?php echo __('On Sale'); ?></span>
        <?php elseif($customHelper->isOneOfKind($product)): ?>
            <span class="callout one-kind"><?php echo __('One of a Kind'); ?></span>
        <?php elseif($customHelper->isProductNew($product)): ?>
            <span class="callout new-product"><?php echo __('New'); ?></span>
        <?php elseif($customHelper->isLastCall($product)): ?>
            <span class="callout last-call"><?php echo __('Last Call'); ?></span>
        <?php endif; ?>
        <p><?php echo $customHelper->limit_description($product->getShortDescription(), 10); ?></p>
        <?php $abstractProductBlock = $block->getLayout()->createBlock('\Magento\Catalog\Block\Product\AbstractProduct'); ?>
        <h5 class="decorating-formula-price"><?php echo $abstractProductBlock->getProductPrice($product) ?></h5>
    </div>
<?php endforeach; ?>
<?php endif; ?>